<?php

function graphql_api_admin_config($form, &$form_state) {
  $options = [null => '-- please select --'];
  foreach (entity_get_info() as $entity_type => $entity_info) {
    $options[$entity_type] = $entity_type .' - '. $entity_info['label'];
  }
  $form['graphql_entity_types'] = [
    '#type' => 'select',
    '#options' => $options,
    '#title' => t('Entity type'),
    '#selectize' => [],
    '#multiple' => TRUE,
    '#default_value' => variable_get('graphql_entity_types', [])
  ];
  $form['graphql_debug'] = [
    '#type' => 'checkbox',
    '#title' => t('Debug'),
    '#description' => t('Dump query generated by "graphql_api" using dpm & dpq. Enable module "devel" to use this feature.'),
    '#default_value' => variable_get('graphql_debug', false),
    '#disabled' => module_exists('devel'),
  ];

  return system_settings_form($form);
}